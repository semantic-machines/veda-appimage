"use strict";System.register(["../common/veda.js","../common/individual_model.js","../common/backend.js"],function(a){"use strict";function b(a){throw new TypeError("\""+a+"\" is read-only")}function c(a){return g(a)||f(a)||e(a)||d()}function d(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function e(a,b){if(a){if("string"==typeof a)return h(a,b);var c=Object.prototype.toString.call(a).slice(8,-1);return"Object"===c&&a.constructor&&(c=a.constructor.name),"Map"===c||"Set"===c?Array.from(a):"Arguments"===c||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(c)?h(a,b):void 0}}function f(a){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(a))return Array.from(a)}function g(a){if(Array.isArray(a))return h(a)}function h(a,b){(null==b||b>a.length)&&(b=a.length);for(var c=0,d=Array(b);c<b;c++)d[c]=a[c];return d}function j(a,b){return null!=b&&"undefined"!=typeof Symbol&&b[Symbol.hasInstance]?!!b[Symbol.hasInstance](a):a instanceof b}function k(a){"@babel/helpers - typeof";return k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},k(a)}/**
 * Prefix with 0 if number has single digit
 * @param {number} n
 * @return {string}
 */function l(a){return 9<a?a+"":"0"+a}/**
 * Format string
 * @param {Object} value
 * @return {string}
 */function m(a){var b=!a.language||"NONE"===a.language||q.user&&q.user.preferences&&q.user.preferences.language&&a.language in q.user.preferences.language;return b?a:void 0}/**
 * Format date
 * @param {Date} date
 * @return {string}
 */function n(a){var b=a.getDate(),c=a.getMonth()+1,d=a.getFullYear(),e=a.getHours(),f=a.getMinutes(),g=a.getSeconds(),h=a.getUTCHours(),i=a.getUTCMinutes(),j=a.getUTCSeconds();if(0===h+i+j)return[l(b),l(c),d].join(".");var k=[l(b),l(c),d].join("."),m=[l(e),l(f),l(g)].join(":");return("01.01.1970"===k?"":k)+("00:00:00"===m?"":" "+(0===g?m.substr(0,5):m))}/**
 * Format date
 * @param {number} n
 * @return {string}
 */function o(a){return(a+"").replace(/.(?=(?:[0-9]{3})+\b)/g,"$& ")}/**
 * Flatten individual
 * @param {Object} object
 * @param {string} prefix
 * @param {Object} union
 * @param {Array} visited
 * @return {Object} union
 */function p(a,b,c,d){var e=a["@"];if(c="undefined"==typeof c?{}:c,b="undefined"==typeof b?"":b,d="undefined"==typeof d?[]:d,!(-1<d.indexOf(e))){for(var k in d.push(e),a)if("@"!=k)for(var f,g=a[k],h=b?b+"."+k:k,j=0;j<g.length;j++)if(f=g[j],"Uri"===f.type){var l=new r(f.data);l.isNew()?p(l.properties,h,c,d):(c[h]=c[h]?c[h]:[],c[h].push(f))}else c[h]=c[h]?c[h]:[],c[h].push(f);return c}}/**
 * Сформировать составное наименование объекта
 *
 * @param individual индивид
 * @returns {Array}
 */var q,r,s,t;return{setters:[function(a){q=a.default},function(a){r=a.default},function(a){s=a.default}],execute:function(){t=q.Util||{},a("default",q.Util=t),t.mergeMutualChanges=function(a,b,c){var d,e={};for(d in c)Object.hasOwnProperty.call(c,d)&&(e[d]=c[d]);var f=t.diff(a,c),g=t.diff(b,c),h=t.diff(a,b),i=t.diff(b,a);for(d in g.missing)Object.hasOwnProperty.call(g.missing,d)&&delete e[d];for(d in f.missing)Object.hasOwnProperty.call(f.missing,d)&&delete e[d];for(d in g.added)Object.hasOwnProperty.call(g.added,d)&&(e[d]=g.added[d]);for(d in f.added)Object.hasOwnProperty.call(f.added,d)&&(e[d]=f.added[d]);for(d in g.differ)Object.hasOwnProperty.call(g.differ,d)&&(e[d]=g.differ[d]);for(d in f.diff)Object.hasOwnProperty.call(f.diff,d)&&(e[d]=f.differ[d]);return{merged:e,conflicts:{high:h.differ,low:i.differ}}},t.diff=function(a,b){var c,d,e,f,g,h,j={added:{},missing:{},differ:{}};for(c in b)if(!(c in a))j.missing[c]=b[c];else{if("@"===c){a[c]!==b[c]&&(j.differ[c]=a[c]);continue}for(d=b[c],f=d.length,h=f===a[c].length,g=0;g<f&&h;g++)e=d[g],h=h&&t.hasValue(a,c,e);h||(j.differ[c]=a[c])}for(c in a)c in b||(j.added[c]=a[c]);return j},t.decimalDatetimeReviver=function(a,b){return"data"===a&&"Datetime"===this.type?new Date(b):"data"===a&&"Decimal"===this.type?parseFloat(b):b},t.hasValue=function(a,b,c){var d=!!(a&&a[b]&&a[b].length);return c?!!(d&&a[b].filter(function(a){return a.type===c.type&&a.data.valueOf()===c.data.valueOf()}).length):d},t.toJson=function(a){return JSON.stringify(a,null,2)},t.simpleHash=function(a){var b,c=0;if(0===a.length)return c;for(var d=0;d<a.length;d++)b=a.charCodeAt(d),c=(c<<5)-c+b,c&=c;return c},t.processQuery=function(a,b,c,d,e,f,g,h){var i=function(k){s.query({ticket:q.ticket,query:a,sql:b,sort:c||"'v-s:created' desc",from:k||0,top:e,limit:d,databases:void 0}).then(function(a){var b=a.cursor,c=a.estimated;d>c&&(d=c),l.apply(j,a.result),.05<=b/d-m&&(m=b/d,console.log("Fetching progress:",Math.floor(100*m)+"%","("+b,"of",d+")")),b===c||b>=d?(console.log(new Date().toString(),"Fetching done:",d),console.timeEnd("Fetching total"),j.splice(d-b||d),t.processResult(j,f,g,h)):i(a.cursor)})};"object"===k(a)&&(c=a.sort,d=a.limit,e=a.queryDelta,f=a.processDelta,g=a.pause,h=a.fn,b=a.sql,a=a.vql),console.log(new Date().toISOString(),"Process query results |||","query:",a||b," | ","limit:",d," | ","query delta:",e," | ","process delta:",f," | ","pause:",g);var j=[],l=[].push,m=0;return console.time("Fetching total"),void i()},t.processResult=function(a,b,c,d){var e=function(){var h=a.splice(0,b);h.reduce(function(a,b){return a.then(function(){return d(b)}).catch(function(a){console.log("Error processing item:",b),console.log(a,a.stack)})},Promise.resolve()).then(function(){.05<=(f-a.length)/f-g&&(g=(f-a.length)/f,console.log("Processing progress:",Math.floor(100*g)+"%","("+(f-a.length),"of",f+")")),a.length?setTimeout?setTimeout(e,c):e():(console.log("Processing done:",f),console.timeEnd("Processing total"))})},f=a.length,g=0;console.log(new Date().toISOString(),"Process results |||","total:",f," | ","delta:",b," | ","pause:",c),console.time("Processing total"),e()},t.genUri=function(){var a=t.guid();return /^\d/.test(a)?"d:a"+a:"d:"+a},t.guid=function(){var a=new Date().getTime();return"undefined"!=typeof performance&&"function"==typeof performance.now&&(a+=performance.now()),"xxxxxxxxxxxxxxxxxxxxxxxxxx".replace(/x/g,function(){var b=0|(a+36*Math.random())%36;return a=Math.floor(a/36),b.toString(36)})},t.isInteger=function(a){return 0==a%1},t.formatValue=function(a){var b;switch(!0){case j(a,Date):b=n(a);break;case j(a,Number)||"number"==typeof a:b=o(a);break;case j(a,String)||"string"==typeof a:b=m(a);break;default:b="undefined"==typeof a?a:a.toString();}return b};/*
 * from http://stackoverflow.com/questions/27266550/how-to-flatten-nested-array-in-javascript
 * by http://stackoverflow.com/users/2389720/aduch
 *
 * This is done in a linear time O(n) without recursion
 * memory complexity is O(1) or O(n) if mutable param is set to false
 */t.forSubIndividual=function(a,b,c,d){void 0===a[b]||a[b].forEach(function(a){a.id==c&&d(a)})},t.removeSubIndividual=function(a,b,c){return void 0===a[b]?void 0:a[b].filter(function(a){return a.id!==c})},t.flatten=function(a,b){var d,e=Object.prototype.toString,f=[],g=b&&a||a.slice();if(!a.length)return f;d=g.pop();do e.call(d)==="[object Array]"?g.push.apply(g,c(d)):f.push(d);while(g.length&&void 0!==(d=g.pop()));// we reverse result to restore the original order
return f.reverse(),f},t.unique=function(a){for(var b={},c=[],d=0;d<a.length;d++)b[a[d]]||(b[a[d]]=!0,c.push(a[d]));return c},Number.isFinite=Number.isFinite||function(a){return"number"==typeof a&&isFinite(a)},Number.isInteger=Number.isInteger||function(a){return"number"==typeof a&&Number.isFinite(a)&&!(a%1)},Number.isFloat=Number.isFloat||function(a){return"number"==typeof a&&Number.isFinite(a)&&a%1},t.queryFromIndividualPT=function(a,b){var c=function(a){if("string"==typeof a||j(a,String))return a.replace(/'(.+?)'\s+(\w+)/gi,function(a,b,c){var d,e=q.ontology.properties[b].get("rdfs:range")[0],f=b.replace(/[^a-zA-Z0-9]/g,"_");switch(e.id){case"xsd:dateTime":d=f+".date "+c;break;case"xsd:boolean":case"xsd:integer":d=f+".int "+c;break;case"xsd:decimal":d=f+".dec "+c;break;case"xsd:string":default:d=f+".str "+c;}return d})},d=function(a){var b=[],c=-1,d=Object.keys(a.properties).map(function(d){if(0<=d.indexOf(".")||0<=d.indexOf("*"))throw new Error("VQL style property nesting: "+d);if("@"!==d){c++;var e="veda_pt.`"+d+"` as p"+c;b[c]=e;var f,g=a.get(d).sort(function(c,a){return c<a?-1:c===a?0:1});switch(!0){case Number.isInteger(g[0]):f="p"+c+".int[1] >= "+g[0]+" AND p"+c+".int[1] <= "+g[g.length-1];break;case Number.isFloat(g[0]):f="p"+c+".dec[1] >= "+g[0]+" AND p"+c+".dec[1] <= "+g[g.length-1];break;case j(g[0],Date):var h=new Date(g[0]),i=new Date(g[g.length-1]);h.setHours(0,0,0,0),i.setHours(23,59,59,999),h=Math.floor(h.valueOf()/1e3),i=Math.floor(i.valueOf()/1e3),f="p"+c+".date[1] >= toDateTime("+h+") AND p"+c+".date[1] <= toDateTime("+i+")";break;case"boolean"==typeof g[0]:f=g.map(function(a){return"p"+c+".int[1] = "+(a?1:0)}).join(" OR ");break;case j(g[0],String):f=g.filter(Boolean).map(function(a){var b=a.trim().split("\n"),d=b.map(function(a){var b=a.trim().replace(/[-*\s]+/g," ").split(" ");return b.length&&"arrayStringConcat("+"p"+c+".str, ' ') LIKE '%"+b.join("% %").replace(/\'/g,"\\'").replace(/\"/g,"'")+"%'"});return d.filter(Boolean).join(" OR ")}).filter(Boolean).join(" OR ");break;case j(g[0],r):f=g.filter(Boolean).map(function(a){return a.isNew()?void 0:"has("+"p"+c+".str, '"+a.id+"')"}).filter(Boolean).join(" OR ");}return f?0<f.indexOf(" OR ")?"( "+f+" )":f:void 0}}).filter(Boolean).join(" AND "),e=b.reduce(function(a,b,c){return a?a+" JOIN "+b+" ON p"+(c-1)+".id = p"+c+".id":b},"");return"SELECT DISTINCT id FROM "+e+(d?" WHERE "+d:"")};try{var e=d,f=c(b);return e=e&&f?e+" ORDER BY "+f:e,e}catch(a){console.log(a)}},t.queryFromIndividualTT_SUB=function(a,c,d){var e=function(a){var b,c="id";return("string"==typeof a||j(a,String))&&(b=a.replace(/'(.+?)'\s+(\w+)/gi,function(a,b){var c=q.ontology.properties[b].get("rdfs:range")[0],d=b.replace(re,"_");switch(c.id){case"xsd:dateTime":d+="_date";break;case"xsd:boolean":case"xsd:integer":d+="_int";break;case"xsd:decimal":d+="_dec";break;case"xsd:string":default:d+="_str";}return d})),b?c+", "+b:c},f=function(a){if("string"==typeof a||j(a,String))return a.replace(/'(.+?)'\s+(\w+)/gi,function(a,b,c){var d,e=q.ontology.properties[b].get("rdfs:range")[0],f=b.replace(re,"_");switch(e.id){case"xsd:dateTime":d=f+"_date "+c;break;case"xsd:boolean":case"xsd:integer":d=f+"_int "+c;break;case"xsd:decimal":d=f+"_dec "+c;break;case"xsd:string":default:d=f+"_str "+c;}return d})},g=function(a){if(!(a.id in visited)){visited[a.id]=!0;var c=Object.keys(a.properties).map(function(c){if(0<=c.indexOf(".")||0<=c.indexOf("*"))throw new Error("VQL style property nesting: "+c);if("@"!==c&&"rdf:type"!==c){var d,e=a.get(c).sort(function(c,a){return c<a?-1:c===a?0:1}),f=c.replace(re,"_");switch(!0){case Number.isInteger(e[0]):d=f+"_int[1] >= "+e[0]+" AND "+f+"_int[1] <= "+e[e.length-1];break;case Number.isFloat(e[0]):d=f+"_dec[1] >= "+e[0]+" AND "+f+"_dec[1] <= "+e[e.length-1];break;// Date
case j(e[0],Date):var h=new Date(e[0]),i=new Date(e[e.length-1]);h.setHours(0,0,0,0),i.setHours(23,59,59,999),h=Math.floor(h.valueOf()/1e3),i=Math.floor(i.valueOf()/1e3),d=f+"_date[1] >= toDateTime("+h+") AND "+f+"_date[1] <= toDateTime("+i+")";break;case"boolean"==typeof e[0]:d=e.map(function(a){return f+"_int[1] = "+(a?1:0)}).join(" OR ");break;case j(e[0],String):d=e.filter(Boolean).map(function(a){var c=a.trim().split("\n"),d=c.map(function(a){var c=a.trim().replace(/[-*\s]+/g," ").split(" ");// 'text' is a special single-value column without suffix with all text content of an individual
return /\.\*$/.test(f)&&(f.replace("*","text"),b("prop")),/\.text$/.test(f)?c.length&&f+" LIKE '%"+c.join("% %").replace(/\'/g,"\\'").replace(/\"/g,"'")+"%'":c.length&&"lowerUTF8(arrayStringConcat("+f+"_str, ' ')) LIKE lowerUTF8('%"+c.join("% %").replace(/\'/g,"\\'").replace(/\"/g,"'")+"%')"});return d.filter(Boolean).join(" OR ")}).filter(Boolean).join(" OR ");break;case j(e[0],r):d=e.filter(Boolean).map(function(a){if(a.isNew()){var b=g(a);return b?f+"_str IN ( "+b+" )":void 0}return"has("+f+"_str, '"+a+"')"}).filter(Boolean).join(" OR ");}return d?0<d.indexOf(" OR ")?"( "+d+" )":d:void 0}}).filter(Boolean).join(" AND ");return d||(c+=c?" AND ":"",c+="NOT v_s_deleted_int = [1]"),1<Object.keys(visited).length&&!c?void 0:a.get("rdf:type").map(function(a){var b="veda_tt.`"+a.id+"`",d="SELECT id FROM "+b+(c?" WHERE "+c:"");return d}).filter(Boolean).join(" UNION ALL ")}};try{var h=g(a),i=e(c);h=h&&i?h+" GROUP BY "+i:h;var k=f(c);return h=h?h+" HAVING sum(sign) > 0":h,h=h&&k?h+" ORDER BY "+k:h,h}catch(a){console.log(a)}},t.queryFromIndividualTT_JOIN=function(a,c,d){var e=0,f=/[^a-zA-Z0-9]/g;try{return a["rdf:type"].map(function(g,h){/**
       * Form `group by` clause
       * @param {string} sort
       * @return {string}
       */ /**
       * Form `order by` clause
       * @param {string} sort
       * @return {string}
       */ /**
       * Recursive from & where population
       * @param {IndividualModel} individual
       * @param {string} parent_prop
       * @param {number} type_index
       */function i(a,c,g){if(a.hasValue("rdf:type")){e++,g=g||0;var h=a.get("rdf:type")[g].id,n="t"+e;m[a.id]=n;var o="veda_tt.`"+h+"` AS "+n;k+=c?" JOIN "+o+" ON "+c+" = ["+n+".id]":o,d||(l+=l?" AND ":"",l+="NOT "+n+".v_s_deleted_int = [1]");var p=Object.keys(a.properties).map(function(c){if(0<=c.indexOf(".")||0<=c.indexOf("*"))throw new Error("VQL style property nesting: "+c);if("@"!==c&&"rdf:type"!==c){var d,e=a.get(c).sort(function(c,a){return c<a?-1:c===a?0:1}),g=n+"."+c.replace(f,"_");switch(!0){case Number.isInteger(e[0]):d=g+"_int[1] >= "+e[0]+" AND "+g+"_int[1] <= "+e[e.length-1];break;case Number.isFloat(e[0]):d=g+"_dec[1] >= "+e[0]+" AND "+g+"_dec[1] <= "+e[e.length-1];break;case j(e[0],Date):var h=new Date(e[0]),k=new Date(e[e.length-1]);h.setHours(0,0,0,0),k.setHours(23,59,59,999),h=Math.floor(h.valueOf()/1e3),k=Math.floor(k.valueOf()/1e3),d=g+"_date[1] >= toDateTime("+h+") AND "+g+"_date[1] <= toDateTime("+k+")";break;case"boolean"==typeof e[0]:d=e.map(function(a){return g+"_int[1] = "+(a?1:0)}).join(" OR ");break;case j(e[0],String):d=e.filter(Boolean).map(function(a){var c=a.trim().split("\n"),d=c.map(function(a){var c=a.trim().replace(/[-*\s]+/g," ").split(" ");// 'text' is a special single-value column without suffix with all text content of an individual
return /\.\*$/.test(g)&&(g.replace("*","text"),b("prop")),/\.text$/.test(g)?c.length&&g+" LIKE '%"+c.join("% %").replace(/\'/g,"\\'").replace(/\"/g,"'")+"%'":c.length&&"lowerUTF8(arrayStringConcat("+g+"_str, ' ')) LIKE lowerUTF8('%"+c.join("% %").replace(/\'/g,"\\'").replace(/\"/g,"'")+"%')"});return d.filter(Boolean).join(" OR ")}).filter(Boolean).join(" OR ");break;case j(e[0],r):d=e.filter(Boolean).map(function(a){return a.isNew()&&!(a.id in m)?i(a,g+"_str"):a.isNew()&&a.id in m?"has("+g+"_str, "+m[a.id]+".id"+")":"has("+g+"_str, '"+a+"')"}).filter(Boolean).join(" OR ");}return d?0<d.indexOf(" OR ")?"( "+d+" )":d:void 0}}).filter(Boolean).join(" AND ");p&&(l?l+=" AND "+p:l=p)}}var k="",l="",m=m||{};i(a,void 0,h);var n=k?"SELECT id FROM "+k:"";n=n&&l?n+" WHERE "+l:n;var o=function(a){var b,c="id";return("string"==typeof a||j(a,String))&&(b=a.replace(/'(.+?)'\s+(\w+)/gi,function(a,b){var c=q.ontology.properties[b].get("rdfs:range")[0],d=b.replace(f,"_");switch(c.id){case"xsd:dateTime":d+="_date";break;case"xsd:boolean":case"xsd:integer":d+="_int";break;case"xsd:decimal":d+="_dec";break;case"xsd:string":default:d+="_str";}return d})),b?c+", "+b:c}(c);n=n&&o?n+" GROUP BY "+o:n;var p=function(a){if("string"==typeof a||j(a,String))return a.replace(/'(.+?)'\s+(\w+)/gi,function(a,b,c){var d,e=q.ontology.properties[b].get("rdfs:range")[0],g=b.replace(f,"_");switch(e.id){case"xsd:dateTime":d=g+"_date "+c;break;case"xsd:boolean":case"xsd:integer":d=g+"_int "+c;break;case"xsd:decimal":d=g+"_dec "+c;break;case"xsd:string":default:d=g+"_str "+c;}return d})}(c);return n=n?n+" HAVING sum(sign) > 0":n,n=n&&p?n+" ORDER BY "+p:n,n}).join(" UNION ALL ")}catch(a){console.log(a)}},t.queryFromIndividual=function(a){var b=p(a.properties);if(a.hasValue("*")&&0<a.get("*")[0].indexOf("=="))return a.get("*")[0];var c=Object.getOwnPropertyNames(b).map(function(a){if("@"!==a&&"v-s:isDraft"!==a){var c,d=b[a].sort(function(c,a){return c.data<a.data?-1:c.data===a.data?0:1});switch(d[0].type){case"Integer":case"Decimal":c="'"+a+"'==["+d[0].data+","+d[d.length-1].data+"]";break;// Date
case"Datetime":var e=new Date(d[0].data),f=new Date(d[d.length-1].data);e.setHours(0,0,0,0),f.setHours(23,59,59,999),c="'"+a+"'==["+e.toISOString()+","+f.toISOString()+"]";break;case"Boolean":c=d.map(function(b){return"'"+a+"'=='"+b.data+"'"}).join(" || ");break;case"String":c=d.filter(function(a){return!!a&&!!a.valueOf()}).map(function(b){var c=b.data;if(!c.match(/[\+\-\*]/)){var d=c.trim().split("\n"),e=d.map(function(b){var c=b.trim().replace(/[-*\s]+/g," ").split(" ");return b=c.map(function(a){return"+"+a+"*"}).join(" "),"'"+a+"'=='"+b+"'"});return e.join(" || ")}return"'"+a+"'=='"+c+"'"}).join(" || ");break;case"Uri":c=d.filter(function(a){return!!a&&!!a.valueOf()}).map(function(b){return"rdf:type"===a?"'"+a+"'=='"+b.data+"'":"'"+a+"'=='"+b.data+"'"}).join(" || ");}return c?"( "+c+" )":void 0}}).filter(function(a){return"undefined"!=typeof a}).join(" && "),d=c?"( "+c+" )":void 0;return d},t.complexLabel=function(a){a=a.properties||a;var b={};b[a["@"]]=a;var c=function(a){return b[a]?b[a]:b[a]=get_individual(q.ticket,a)},d=function(a,b){var d=arguments,e=c(b);if(!e)return"";for(var f,g,h=[e],l=function(b,e){var f=2>=d.length?0:d.length-2;if(b===f-1){var i=[];return h.forEach(function(b){if(b[e]){var c=b[e].reduce(function(b,c){if(!c.lang||"NONE"===c.lang||c.lang.toLowerCase()===a.toLowerCase()){var d=c.data;return(j(d,Date)||/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}.*Z$/i.test(d))&&(d=new Date(d),d=new Date(d.getTime()-6e4*d.getTimezoneOffset()).toISOString().substr(0,10)),b+=d}return b},"");i.push(c)}}),{v:i.join(", ")}}var g=[];return h.forEach(function(a){t.hasValue(a,e)&&a[e].forEach(function(a){g.push(c(a.data))})}),g.length?void(h=g):{v:""}},m=0;f=2>m+2||arguments.length<=m+2?void 0:arguments[m+2];m++)if(g=l(m,f),"object"===k(g))return g.v;return""};try{var e=c("v-ui:AvailableLanguage"),f=e["rdf:value"].map(function(a){var b=a.data,d=c(b);return d["rdf:value"][0].data});return a["rdf:type"].reduce(function(b,e){var g=e.data,h=c(g);if(!h||!t.hasValue(h,"v-s:labelPattern"))return b;var i=h["v-s:labelPattern"][0].data;return f.forEach(function(c){var e=i.replace(/{(\s*([^{}]+)\s*)}/g,function(b,e){var f=null;if(-1!=e.indexOf(" ")){var i=e.split(" ");e=i[0],f=i[1].substring(1,i[1].length-1).split(",")}var g=e.split(".");"@"===g[0]&&(g[0]=a["@"]);var h=d.apply({},[c].concat(g));return null==f?h:h.substring(+f[0],+f[1])});b.push({data:e,lang:c,type:"String"})}),b},[])}catch(a){return console.log("Complex label error",a,a.stack),[]}},t.areEqual=function(a,b){if(a===b)return!0;if(!j(a,Object)||!j(b,Object))return!1;if(a.constructor!==b.constructor)return!1;for(var c in a)if(a.hasOwnProperty(c)){if(!b.hasOwnProperty(c))return!1;if(a[c]!==b[c]){if("object"!==k(a[c]))return!1;if(!t.areEqual(a[c],b[c]))return!1}}for(var d in b)if(b.hasOwnProperty(d)&&!a.hasOwnProperty(d))return!1;return!0}}}});
//# sourceMappingURL=util.js.map